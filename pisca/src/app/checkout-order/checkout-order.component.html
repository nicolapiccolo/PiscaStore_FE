<body>
<div class="main-pane">
  <div class="spinner" *ngIf="loading$ | async">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <div class="spinner-grow" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <div class="cart-pane" *ngIf="!(loading$ | async) && !isSuccess">

    <h3 class="title">Riepilogo ordine ({{strTotal}})</h3>
    <div class="basket">
      <div class="row">
        <div class="col">
          <li class="index"><strong>1 &nbsp; &nbsp; Indirizzo di consegna</strong></li>
        </div>
        <div class="col col-center" *ngIf="isEmpty">
          <li class="field">Nessun indirizzo presente</li>
        </div>
        <div class="col col-center">
          <li class="field" [innerHTML]="currentAddress"></li>
        </div>
        <div class="col col-right">
          <li class="modify">
            <button class="btn-modify" (click)="modifyAddress()">Modifica</button>
          </li>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <li class="index"><strong>2 &nbsp; &nbsp; Modalit√† di pagamento</strong></li>
        </div>
        <div class="col col-right">
          <li><img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/PP_logo_h_100x26.png" alt="PayPal"/>
          </li>
        </div>
      </div>
      <div class="row" style="margin-bottom: 100px">
        <div class="col">
          <li class="index"><strong>3 &nbsp; &nbsp; Rivedi gli articoli</strong></li>

          <div class="product-list">

            <ng-container *ngFor="let product of products">
              <div class="basket-product">
                <div class="item">
                  <div class="product-image">
                    <img src="http://localhost:8080/catalog/api/v1/image/{{product.image}}"
                         onerror="this.src=assets/Images/not.png" class="product-frame">
                  </div>
                  <div class="product-details">
                    <h5 class="product-title">{{product.name}}</h5>
                    <h5 class="product-dimensions">{{product.dimensions}}</h5>
                  </div>
                </div>
                <div class="product-price">{{ product.price | currency: 'EUR'}}</div>
              </div>
            </ng-container>

          </div>
        </div>
      </div>
    </div>
    <aside *ngIf="!isEmpty">
      <div class="summary">
        <div class="summary-total-items"><span class="total-items"></span> {{strTotal}} in your Bag</div>
        <div class="summary-total">
          <div class="total-title">Total</div>
          <div class="total-value final-value" id="basket-total"><strong>{{totalPrice | currency: 'EUR'}}</strong></div>
        </div>
        <div class="summary-checkout">
          <button class="checkout-cta" (click)="pay()">Confirm & Pay</button>
        </div>
      </div>
    </aside>

  </div>
  <div class="order-success" *ngIf="isSuccess">
    <h4 class="text-center">Ordine completato, ritorna alla home!</h4>
    <h3 class="text-center" href="home">Torna alla home</h3>
    <img src="assets/Images/complete.jpg" width="128" height="128" alt="complete">
  </div>
</div>
</body>
